<!DOCTYPE html>
<html>
    <head>

        <style>
            table.center {
                margin-left: auto; 
                margin-right: auto;
            }
        </style>
        <script>
            var key = "AIzaSyDWvmjDzvFJUxU6J8ktMP9HQIuUuXchWLg";
            function callAPi(){

                var title = document.getElementById("title").value;
                var author = document.getElementById("author").value;
                var publisher = document.getElementById("publisher").value;
                var temp = document.getElementById("information");

                query = "https://www.googleapis.com/books/v1/volumes?q=";
                if (title !=""){
                    title = title.trim();
                    title = title.replace(" ", "+");
                    query += ("intitle:"+title);
                }
                if (author != "") {
                    author = author.trim();
                    author = author.replace(" ", "+");
                    query += ("inauthor:"+author);
                }
                if (publisher != "") {
                    publisher = publisher.trim();
                    publisher = publisher.replace(" ", "+");
                    query += ("inpublisher:"+publisher);
                }
                query += ("&key="+key);

                var xhttp = new XMLHttpRequest();
                
                xhttp.open("get", query, true);
                xhttp.responseType = 'json';
                xhttp.onreadystatechange = function () {
                    if (xhttp.readyState == 4) {
                        if (xhttp.status == 200) {
                            // console.log(xhttp.response);
                            var stringified = JSON.stringify(xhttp.response);
                            // console.log(stringified);
                            var parsedObj = JSON.parse(stringified);
                            var book = JSON.stringify(parsedObj.items[0].volumeInfo.publisher);
                            temp.innerHTML = book;
                            // var parsedObj = JSON.parse(book);
                            // var bookInfo = JSON.stringify(parsedObj.publisher);
                            // console.log(bookInfo);
                        }
                    }
                };
                xhttp.send();
            }
        </script>
    </head>
    <body>
        <table class="center">
            <tr>
                <td>Title: </td>
                <td><input type="text" id="title" value="" size="20"></td>
            </tr>
            <tr>
                <td>Author: </td>
                <td><input type="text" id="author" value="" size="20"></td>
            </tr>
            <tr>
                <td>Publisher: </td>
                <td><input type="text" id="publisher" value="" size="20"></td>
            </tr>
        </table>
        <p><input type="button" value="query" onclick="callAPi()"></p>
        <div id="information"></div>
    </body>


</html>